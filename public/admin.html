<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>GGgifts Admin</title>
</head>
<body>
  <h2>Админка GGgifts</h2>

  <input id="search" placeholder="ID или username" />
  <button onclick="search()">Поиск</button>

  <h3>Рассылка всем</h3>
  <textarea id="broadcast" rows="4" cols="40"></textarea><br>
  <button onclick="sendAll()">Отправить всем</button>

  <pre id="result"></pre>

  <script>
    const ADMIN_ID = YOUR_TELEGRAM_ID; // ← ВСТАВЬ СВОЙ ID

    async function search() {
      const target = document.getElementById("search").value;

      const res = await fetch("/api/admin", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          admin_id: ADMIN_ID,
          action: "search_user",
          target,
        }),
      });

      document.getElementById("result").textContent =
        JSON.stringify(await res.json(), null, 2);
    }

    async function sendAll() {
      const text = document.getElementById("broadcast").value;

      await fetch("/api/admin", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          admin_id: ADMIN_ID,
          action: "broadcast",
          text,
        }),
      });

      alert("Отправлено");
    }
  </script>
</body>
</html>
