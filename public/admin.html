<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background: #0b0d12;
  color: white;
  font-family: Arial;
  padding: 20px;
}

input, button {
  width: 100%;
  padding: 12px;
  margin-top: 10px;
  border-radius: 8px;
  border: none;
}

button {
  background: #2ea6ff;
  color: white;
  font-weight: 600;
}
</style>
</head>

<body>

<h2>Админка</h2>

<input id="search" placeholder="Юзернейм или ID">
<button onclick="searchUser()">Найти пользователя</button>

<hr>

<input id="broadcast" placeholder="Сообщение всем пользователям">
<button onclick="sendAll()">Отправить всем</button>

<pre id="result"></pre>

<script>
const ADMIN_ID = 7461986138;

async function searchUser() {
  const q = document.getElementById('search').value;

  const r = await fetch('/api/admin', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      admin_id: ADMIN_ID,
      action: 'search_user',
      query: q
    })
  });

  document.getElementById('result').textContent =
    JSON.stringify(await r.json(), null, 2);
}

async function sendAll() {
  const text = document.getElementById('broadcast').value;

  const r = await fetch('/api/admin', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      admin_id: ADMIN_ID,
      action: 'broadcast',
      text
    })
  });

  alert('Отправлено');
}
</script>

</body>
</html>
